<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>For Selly ‚ù§Ô∏è</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Dancing+Script:wght@600&display=swap" rel="stylesheet">

<style>
html,body{
  margin:0;
  height:100%;
  overflow:hidden;
  background:#000;
  font-family:Arial,Helvetica,sans-serif;
}

/* ===== BACKGROUND (iPhone safe) ===== */
.bg-wrapper{
  position:fixed;
  inset:0;
  z-index:-3;
  overflow:hidden;
}
.bg-wrapper img{
  position:absolute;
  width:100%;
  height:100%;
  object-fit:cover;
  filter:blur(18px) brightness(0.8);
  transform:scale(1.15);
  transition:opacity 0.5s ease, transform 1s ease;
}
.bg-overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.45);
  z-index:-2;
}

/* ===== PARTICLES ===== */
.particle{
  position:fixed;
  bottom:-60px;
  font-size:24px;
  opacity:0.5;
  pointer-events:none;
  animation:floatUp linear infinite;
}
@keyframes floatUp{
  from{transform:translateY(0)}
  to{transform:translateY(-120vh)}
}

/* ===== GIFT ===== */
.scene{
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background:#0f0f17;
  position:relative;
}
.tap-text{
  position:absolute;
  top:15vh;
  color:white;
  font-size:18px;
}
.box{
  width:220px;
  height:220px;
  perspective:900px;
  cursor:pointer;
}
.box-body{
  width:100%;
  height:100%;
  border-radius:14px;
  background:linear-gradient(145deg,#ff7aa2,#ff3b7a);
  box-shadow:0 30px 80px rgba(0,0,0,0.7);
  position:relative;
}
.box-lid{
  position:absolute;
  inset:0;
  background:linear-gradient(145deg,#ff7aa2,#ff3b7a);
  border-radius:14px;
  transform-origin:top;
  transition:0.7s ease;
}
.box-bowtie{
  position:absolute;
  width:68px;
  height:34px;
  background:white;
  border-radius:40px;
  top:-20px;
  left:50%;
  transform:translateX(-50%);
}
.flower{
  position:absolute;
  left:50%;
  bottom:-220px;
  transform:translateX(-50%);
  width:170px;
  opacity:0;
  transition:1s cubic-bezier(0.22,1,0.36,1);
}

/* ===== CAROUSEL ===== */
.memory-section{
  display:none;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  perspective:1200px;
}
.carousel{
  position:relative;
  width:100%;
  max-width:900px;
  height:480px;
  display:flex;
  align-items:center;
  justify-content:center;
}
.card{
  position:absolute;
  width:85vw;
  max-width:380px;
  background:white;
  padding:16px;
  border-radius:12px;
  box-shadow:0 30px 70px rgba(0,0,0,0.6);
  text-align:center;
  transition:0.6s cubic-bezier(0.22,1,0.36,1);
}
.card img,
.card iframe{
  width:100%;
  border-radius:8px;
}
.date{
  font-family:'Playfair Display',serif;
  font-weight:700;
  margin-top:8px;
}
.caption{
  font-family:'Dancing Script',cursive;
  font-size:20px;
  margin-top:6px;
  white-space:pre-line;
}

/* timeline */
.counter{
  font-family:'Playfair Display',serif;
  font-size:22px;
  font-weight:700;
  margin-top:12px;
}
.final-title{
  font-family:'Playfair Display',serif;
  font-size:24px;
  font-weight:700;
}
.final-text{
  font-family:'Dancing Script',cursive;
  font-size:22px;
}
</style>
</head>
<body>

<!-- Background -->
<div class="bg-wrapper">
  <img id="bgImage" src="mem1.jpeg">
</div>
<div class="bg-overlay"></div>

<!-- Gift -->
<div class="scene" id="giftScene">
  <div class="tap-text">Tap on me</div>
  <div class="box" onclick="openBox()">
    <div class="box-body">
      <img src="flowers.png" class="flower" id="flower">
      <div class="box-lid" id="lid"></div>
      <div class="box-bowtie"></div>
    </div>
  </div>
</div>

<!-- Memories -->
<div class="memory-section" id="memorySection">
  <div class="carousel" id="carousel"></div>
</div>

<script>
const bgImage = document.getElementById("bgImage");

/* ===== PARTICLES ===== */
setInterval(()=>{
  const p=document.createElement("div");
  p.className="particle";
  p.innerText=Math.random()>0.5?"‚ù§Ô∏è":"üåπ";
  p.style.left=Math.random()*100+"vw";
  p.style.fontSize=(20+Math.random()*20)+"px";
  p.style.animationDuration=(10+Math.random()*10)+"s";
  document.body.appendChild(p);
  setTimeout(()=>p.remove(),20000);
},900);

/* ===== GIFT ===== */
function openBox(){
  const lid=document.getElementById("lid");
  const flower=document.getElementById("flower");

  lid.style.transform="rotateX(-120deg)";
  setTimeout(()=>{
    flower.style.bottom="20px";
    flower.style.opacity="1";
  },500);

  setTimeout(()=>{
    document.getElementById("giftScene").style.display="none";
    document.getElementById("memorySection").style.display="flex";
    initCarousel();
  },1500);
}

/* ===== MEMORIES ===== */
const memories=[
  {type:"img",src:"mem1.jpeg",date:"15 May 2024",cap:"The day we started talking.\nI didn‚Äôt know you would become this important."},
  {type:"img",src:"mem2.jpeg",date:"01 Aug 2024",cap:"Girlfriend's Day.\nThat small cute cake."},
  {type:"img",src:"mem3.jpeg",date:"28 Sep 2024",cap:"Our first meet up.\nThat day felt different."},
  {type:"video",src:"https://streamable.com/e/2c6hpr",date:"15 May 2025",cap:"One year together.\nWe stayed."},
  {type:"timeline"}
];

let current=0;
const carousel=document.getElementById("carousel");

function initCarousel(){
  updateBg();
  render();
}

function updateBg(){
  if(memories[current].src){
    bgImage.src=memories[current].src;
  }
}

function render(){
  carousel.innerHTML="";
  memories.forEach((m,i)=>{
    const card=document.createElement("div");
    card.className="card";
    const offset=i-current;
    card.style.transform=`translateX(${offset*320}px) scale(${offset==0?1:0.8})`;
    card.style.opacity=offset==0?1:0.6;

    if(m.type==="img"){
      card.innerHTML=`<img src="${m.src}"><div class="date">${m.date}</div><div class="caption">${m.cap}</div>`;
    }else if(m.type==="video"){
      card.innerHTML=`<iframe src="${m.src}" allowfullscreen></iframe><div class="date">${m.date}</div><div class="caption">${m.cap}</div>`;
    }else{
      startTimeline(card);
    }

    carousel.appendChild(card);
  });
}

/* ===== SIMPLE SWIPE ===== */
let startX=0;
document.addEventListener("touchstart",e=>{startX=e.touches[0].clientX});
document.addEventListener("touchend",e=>{
  const diff=e.changedTouches[0].clientX-startX;
  if(diff<-80 && current<memories.length-1) current++;
  if(diff>80 && current>0) current--;
  updateBg();
  render();
});

/* ===== TIMELINE ===== */
function startTimeline(card){
  const start=new Date("2024-05-15");
  const now=new Date();
  const days=Math.floor((now-start)/(1000*60*60*24));
  card.innerHTML=`<div class="counter">${days} days</div>
  <div class="final-title">Happy Valentine Day ‚ù§Ô∏è</div>
  <div class="final-text">Till forever.</div>`;
}
</script>

</body>
</html>
